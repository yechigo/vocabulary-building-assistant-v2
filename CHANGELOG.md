# 変更履歴

## v2.0.0 (2025-12-19)

### 🎉 初回リリース

#### 新機能
- Google Cloud Text-to-Speech APIによる高品質音声合成
- IndexedDBによる音声キャッシュ機能
- Media Session APIによるロック画面対応（Safari）
- シャッフル再生機能（再生中の切り替え対応）
- ループモード（無限ループ/ワンパス）
- ナビゲーションボタン（前へ/次へ/再生リプレイ）
- 自動データ読み込み（起動時と停止時）
- 待機時間調整（0〜30秒、0.5秒刻み）
- 統合UI（設定と再生を1画面に）

#### 技術的改善
- シングルページアプリケーション構成
- 状態管理の改善（playback state）
- 音声再生の安定性向上
- エラーハンドリングの強化

#### UI/UX
- アイコンベースのボタン（⏮ ▶ ⏭）
- 折りたたみ式設定パネル
- シンプルで直感的な操作
- レスポンシブデザイン

### 📝 ドキュメント
- README.md: ユーザー向けガイド
- TECHNICAL.md: 技術仕様書
- CHANGELOG.md: このファイル

### 🐛 既知の問題
- iOS PWAモードでのロック画面再生再開に制限あり
- iOS Chromeでのロック画面コントロール制限あり

### 📌 推奨環境
- iOS: Safari（ブラウザモード）
- Android: Chrome / Edge
- PC: Chrome / Safari / Edge

---

## v1との主な違い

| 項目 | v1 | v2 |
|------|----|----|
| 音声合成 | Web Speech API | Google Cloud TTS |
| 音声品質 | 標準 | 高品質 |
| ロック画面再生 | 非対応 | 対応（Safari） |
| 音声キャッシュ | なし | IndexedDB |
| オフライン再生 | 不可 | 可（キャッシュ済み） |
| シャッフル | 基本 | 再生中切り替え対応 |
| ナビゲーション | 限定的 | 完全対応 |
| データ更新 | 手動 | 自動 |
| 初期設定 | 簡単 | やや複雑（API設定） |
| 費用 | 無料 | 実質無料（無料枠内） |

---

## 今後の予定

### 検討中の機能
- [ ] 音声速度調整UI
- [ ] 学習進捗の保存
- [ ] 複数学習セット管理
- [ ] 統計情報表示
- [ ] オフラインモード（Service Worker）
- [ ] ダークモード

### 改善予定
- [ ] PWAモードのロック画面対応改善
- [ ] エラーメッセージの多言語対応
- [ ] パフォーマンス最適化
- [ ] アクセシビリティ向上

---

## アップグレードガイド（v1からv2へ）

### 必要な作業

1. **Google Cloud TTS APIの設定**
   - Google Cloud Consoleでプロジェクト作成
   - Text-to-Speech API有効化
   - APIキー作成と制限設定
   - 詳細はREADME.mdを参照

2. **Google Apps Scriptの確認**
   - v1で設定済みのスクリプトをそのまま使用可能
   - URLの確認のみ

3. **アプリでの設定**
   - アプリを開く
   - 設定パネルでAPIキーを入力
   - Apps Script URLを確認
   - 保存

### データの互換性

v1のGoogle Sheetsデータはv2でそのまま使用できます。
列指定やデータ形式の変更は不要です。

### 移行時の注意点

- 初回起動時に全音声のキャッシュ生成が必要
- キャッシュ完了後は高速再生
- ブラウザのストレージ容量を確認（推奨100MB以上）

---

## サポートとフィードバック

問題や改善提案がある場合:
- GitHubのIssuesで報告
- または直接フィードバック

---

## ライセンス

このプロジェクトは自由に使用・改変できます。
